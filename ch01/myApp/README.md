**myApp** ‚Äî —É—á–µ–±–Ω—ã–π, –Ω–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–≥–æ—Ç–æ–≤—ã–π boilerplate-–ø—Ä–æ–µ–∫—Ç –Ω–∞ **Go 1.25.1 –∑–∞ NGINX**.
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –∏ API-—Å–µ—Ä–≤–∏—Å–æ–≤.

---

## ‚ö° –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üåÄ –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ **Gin** ‚Äî –±—ã—Å—Ç—Ä–æ–º, –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ —Å middleware-—Ü–µ–ø–æ—á–∫–∞–º–∏.
* üîí –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **CSRF**, **CSP —Å nonce**, **HSTS**, **COOP**, **Referrer-Policy**.
* üì¶ –†–∞–±–æ—Ç–∞–µ—Ç –∑–∞ **NGINX** (—Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏): TLS, rate-limit, gzip, –∫—ç—à.
* üß© –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Core / App / Storage / HTTP / View) ‚âà Clean Architecture.
* üß± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MySQL (—á–µ—Ä–µ–∑ sqlx), —à–∞–±–ª–æ–Ω–æ–≤ Go, –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤.
* üß† –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º OWASP Top 10.

---

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```
myApp/
‚îú‚îÄ cmd/
‚îÇ  ‚îî‚îÄ app/
‚îÇ     ‚îî‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (ENV, CSRF-key, DB, graceful shutdown)
‚îÇ
‚îú‚îÄ internal/
‚îÇ  ‚îú‚îÄ app/
‚îÇ  ‚îÇ  ‚îî‚îÄ app.go               # Gin router, middleware, —Å—Ç–∞—Ç–∏–∫–∞, –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ core/
‚îÇ  ‚îÇ  ‚îú‚îÄ config.go            # ENV-–∫–æ–Ω—Ñ–∏–≥, Secure-—Ä–µ–∂–∏–º, —Ç–∞–π–º–∞—É—Ç—ã
‚îÇ  ‚îÇ  ‚îú‚îÄ context.go           # CtxNonce, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∫–ª—é—á–∏
‚îÇ  ‚îÇ  ‚îú‚îÄ errors.go            # AppError (RFC 7807)
‚îÇ  ‚îÇ  ‚îú‚îÄ response.go          # JSON(), Fail() ‚Äî –µ–¥–∏–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç
‚îÇ  ‚îÇ  ‚îú‚îÄ logger.go            # zerolog-–ª–æ–≥–∏ + —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îÇ  ‚îÇ  ‚îî‚îÄ security.go          # CSP, HSTS, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ storage/                # –†–∞–±–æ—Ç–∞ —Å MySQL
‚îÇ  ‚îÇ  ‚îú‚îÄ db.go                # sqlx.DB, –∫–æ–Ω—Ç–µ–∫—Å—Ç, Close()
‚îÇ  ‚îÇ  ‚îú‚îÄ migrations.go        # –ê–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ  ‚îÇ  ‚îî‚îÄ products_repo.go     # Product, ListAll, GetByID
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ http/
‚îÇ  ‚îÇ  ‚îî‚îÄ handler/
‚îÇ  ‚îÇ     ‚îú‚îÄ home.go           # /
‚îÇ  ‚îÇ     ‚îú‚îÄ about.go          # /about
‚îÇ  ‚îÇ     ‚îú‚îÄ form.go           # /form GET / POST
‚îÇ  ‚îÇ     ‚îú‚îÄ catalog.go        # /catalog
‚îÇ  ‚îÇ     ‚îú‚îÄ product.go        # /product/:id
‚îÇ  ‚îÇ     ‚îú‚îÄ notfound.go       # 404
‚îÇ  ‚îÇ     ‚îî‚îÄ debug.go          # /debug (JSON)
‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ view/
‚îÇ     ‚îî‚îÄ templates.go         # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä HTML-—à–∞–±–ª–æ–Ω–æ–≤
‚îÇ
‚îú‚îÄ migrations/
‚îÇ  ‚îî‚îÄ 001_schema.sql          # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –¥–µ–º–æ-—Ç–æ–≤–∞—Ä–æ–≤
‚îÇ
‚îú‚îÄ web/
‚îÇ  ‚îú‚îÄ assets/                 # CSS/JS/—à—Ä–∏—Ñ—Ç—ã/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ  ‚îî‚îÄ templates/
‚îÇ     ‚îú‚îÄ layouts/base.gohtml
‚îÇ     ‚îú‚îÄ partials/{nav,footer}.gohtml
‚îÇ     ‚îî‚îÄ pages/{home,about,form,catalog,product,404}.gohtml
‚îÇ
‚îú‚îÄ logs/                      # info- –∏ error-–ª–æ–≥–∏ —Å –¥–∞—Ç–æ–π
‚îú‚îÄ nginx.conf                 # –ì–æ—Ç–æ–≤—ã–π reverse-proxy (TLS, gzip, cache)
‚îú‚îÄ go.mod / go.sum
‚îî‚îÄ Makefile / make.bat

```

---
- core/logger.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Zerolog, –≤–∫–ª—é—á–∞—é—â–∞—è –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –∏ –º–µ—Ö–∞–Ω–∏–∑–º –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤.
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: InitDailyLog, LogInfo, LogError.

- core/security.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Middleware –¥–ª—è Gin, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–µ–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, Referrer-Policy, Permissions-Policy).
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: SecureHeaders, CSPBasic, CSPAllowInlineStyles, CSPStrictLocalOnly.

- core/response.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ API –∏ –æ—à–∏–±–æ–∫ –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ RFC 7807 (Problem Details for HTTP APIs).
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: JSON, FailC.

- core/errors.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (AppError) –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è.
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: Internal, From, –∏ –ø–æ–∑–¥–Ω–µ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ Forbidden.

- core/context.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –¥–ª—è context.Context, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã CtxNonce, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã CSP.

- core/config.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è Prod-—Ä–µ–∂–∏–º–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π.
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: Load, fatalConfigError (–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ—à–∏–±–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏).

- app/app.go (–≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä):
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¢–æ—á–∫–∞ —Å–±–æ—Ä–∫–∏ Gin-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ middleware –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (RequestID, –¢–∞–π–º–∞—É—Ç, Nonce/DB –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, CSP, –°–µ—Å—Å–∏–∏, CSRF).
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: New, RequestTimeout, withNonceAndDB.

- main.go (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞):
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (–ª–æ–≥–∏, –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏), –¥–µ—Ä–∏–≤–∞—Ü–∏—é CSRF-–∫–ª—é—á–∞, –∑–∞–ø—É—Å–∫ HTTP-—Å–µ—Ä–≤–µ—Ä–∞ –∏ Graceful Shutdown.
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: main, deriveSecureKey.

- view/templates.go:
  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–∞—Ä—Å–∏—Ç –∏ –∫—ç—à–∏—Ä—É–µ—Ç HTML-—à–∞–±–ª–æ–Ω—ã, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (PageData), –∏–∑–≤–ª–µ–∫–∞—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—è —Ç–æ–∫–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSRF –∏ CSP Nonce) –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ HTML.
  –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: New, Render.

---


## üåê –ú–∞—Ä—à—Ä—É—Ç—ã

| –ü—É—Ç—å           | –û–ø–∏—Å–∞–Ω–∏–µ                                    | –¢–∏–ø   |
|----------------|---------------------------------------------|-------|
| `/`            | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞                            | HTML  |
| `/about`       | –û –ø—Ä–æ–µ–∫—Ç–µ                                   | HTML  |
| `/form` (GET)  | –§–æ—Ä–º–∞ —Å CSRF –∏ nonce                        | HTML  |
| `/form` (POST) | –í–∞–ª–∏–¥–∞—Ü–∏—è, —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è, PRG (/form?ok=1)    | HTML  |
| `/debug  `     | {"status":"info"} (–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ NGINX)      | JSON  |
| `/assets/*`    | –°—Ç–∞—Ç–∏–∫–∞ (–∫—ç—à –∏ gzip –≤ NGINX)                | Static|
| `/*`           | 404 Not Found (—à–∞–±–ª–æ–Ω)                      | HTML  |



## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –ú–µ—Ö–∞–Ω–∏–∑–º                   | –ì–¥–µ –≤–∫–ª—é—á—ë–Ω                     | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
|----------------------------|---------------------------------|------------------------------------------------|
| **CSRF**                   | app.New() ‚Üí gorilla/csrf        | –¢–æ–∫–µ–Ω –≤ —à–∞–±–ª–æ–Ω–∞—Ö; Secure=true –≤ prod           |
| **CSP**                    | middleware.SecureHeaders         | Self + cdn.jsdelivr.net; nonce –¥–ª—è —Å—Ç–∏–ª–µ–π      |
| **X-Frame-Options**        | middleware.SecureHeaders         | DENY (–æ—Ç clickjacking)                         |
| **X-Content-Type-Options** | middleware.SecureHeaders         | nosniff (–æ—Ç MIME-sniffing)                     |
| **Referrer-Policy**        | middleware.SecureHeaders         | no-referrer-when-downgrade                     |
| **Permissions-Policy**     | middleware.SecureHeaders         | –û—Ç–∫–ª—é—á–∞–µ—Ç camera, microphone, geolocation      |
| **COOP**                   | middleware.SecureHeaders         | same-origin (–∏–∑–æ–ª—è—Ü–∏—è)                         |
| **HSTS**                   | middleware.HSTS (prod)          | HTTPS-only —á–µ—Ä–µ–∑ NGINX                         |
| **Timeout**                | chi/middleware.Timeout(15s)     | –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã                     |
| **Rate Limiting**          | NGINX (limit_req)               | 100 req/s, burst=200 (–æ—Ç DoS)                  |
| **Parameter Pollution**    | middleware.SecureHeaders         | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ query-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤               |
| **–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è**            | handler/form.go ‚Üí bluemonday    | –£–¥–∞–ª—è–µ—Ç –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π HTML                       |
| **TLS**                    | NGINX (Let‚Äôs Encrypt)           | TLS 1.2+, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —à–∏—Ñ—Ä—ã                     |
| **Trusted Proxy**          | middleware/proxy.go             | X-Forwarded-For, X-Real-IP, X-Forwarded-Proto  |



## üß© –†–∞–±–æ—Ç–∞ —Ñ–æ—Ä–º—ã `/form`
- **GET**: –†–µ–Ω–¥–µ—Ä —Å CSRF-—Ç–æ–∫–µ–Ω–æ–º –∏ nonce (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —á–µ—Ä–µ–∑ `view.Render`).
- **POST**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (1MB), —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è (bluemonday), –≤–∞–ª–∏–¥–∞—Ü–∏—è (validator/v10).
- **–û—à–∏–±–∫–∏**: –†–µ—Ä–µ–Ω–¥–µ—Ä —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π (`{{.Data.Errors}}`).
- **–£—Å–ø–µ—Ö**: PRG-—Ä–µ–¥–∏—Ä–µ–∫—Ç (303, `/form?ok=1`).
- **–ë–µ–∑ –ë–î/email**: –î–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏.



## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (ENV)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è             | –û–ø–∏—Å–∞–Ω–∏–µ                     | –î–µ—Ñ–æ–ª—Ç / –ü—Ä–∏–º–µ—Ä |
|------------------------|------------------------------|-----------------|
| `APP_NAME`             | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è          | `myApp`         |
| `HTTP_ADDR`            | –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞                | `:8080`         |
| `APP_ENV`              | –û–∫—Ä—É–∂–µ–Ω–∏–µ                    | `dev` / `prod`  |
| `CSRF_KEY`             | –°–µ–∫—Ä–µ—Ç –¥–ª—è CSRF (‚â•32 –±–∞–π—Ç–∞)  | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è    |
| `SECURE`               | –í–∫–ª—é—á–∏—Ç—å HTTPS/HSTS (NGINX)  | `false` / `true`|
| `SHUTDOWN_TIMEOUT`     | –¢–∞–π–º–∞—É—Ç shutdown             | `10s`           |
| `READ_HEADER_TIMEOUT`  | –¢–∞–π–º–∞—É—Ç —á—Ç–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤    | `5s`            |
| `READ_TIMEOUT`         | –¢–∞–π–º–∞—É—Ç —á—Ç–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞       | `10s`           |
| `WRITE_TIMEOUT`        | –¢–∞–π–º–∞—É—Ç –æ—Ç–≤–µ—Ç–∞               | `30s`           |
| `IDLE_TIMEOUT`         | –¢–∞–π–º–∞—É—Ç –ø—Ä–æ—Å—Ç–æ—è              | `60s`           |



## ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

| ‚Ññ  | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                  | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                              |
|----|----------------------------|--------|------------------------------------------|
| 1  | CSRF                       | ‚úÖ     | –¢–æ–∫–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ö                          |
| 2  | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏       | ‚úÖ     | CSP —Å nonce, HSTS, XFO, nosniff          |
| 3  | TLS (NGINX)                | ‚úÖ     | HTTPS —á–µ—Ä–µ–∑ NGINX (Let‚Äôs Encrypt)        |
| 4  | Graceful Shutdown          | ‚úÖ     | –¢–∞–π–º–∞—É—Ç –∏–∑ ENV                           |
| 5  | –í–∞–ª–∏–¥–∞—Ü–∏—è/–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è      | ‚úÖ     | validator/v10 + bluemonday               |
| 6  | –û—à–∏–±–∫–∏ (RFC7807)           | ‚úÖ     | core.Fail —Å RequestID                    |
| 7  | JSON-–ª–æ–≥–∏                  | ‚úÖ     | –†–æ—Ç–∞—Ü–∏—è, errors-DD-MM-YYYY.log           |
| 8  | 404 / Health               | ‚úÖ     | HTML 404, JSON healthcheck               |
| 9  | Rate Limiting (NGINX)      | ‚úÖ     | 100 req/s –≤ NGINX                        |
| 10 | Trusted Proxy              | ‚úÖ     | X-Forwarded-For/Proto –≤ middleware       |


## üöÄ –ó–∞–ø—É—Å–∫
- **NGINX**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `nginx.conf` (TLS, rate limiting, –∫—ç—à, gzip).
- **Go**: `go run ./cmd/app`.

| –ö–æ–º–∞–Ω–¥–∞       | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|---------------|-----------------------------------|
| `make run`    | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç                  |
| `make build`  | –°–æ–±—Ä–∞—Ç—å bin/app.exe               |
| `make start`  | –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫                |
| `make clean`  | –£–¥–∞–ª–∏—Ç—å bin                       |
| `make test`   | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã                   |
| `make lint`   | go fmt, go vet                    |

### –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å (cmd / PowerShell)
–ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø—É—Å–∫–∞–π:

| –ö–æ–º–∞–Ω–¥–∞ (cmd / PowerShell)          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                          | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                                                |
| ----------------------------------- | ----------------------------------- | --------------------------------------------------------- |
| `.\make.bat run` <br>–∏–ª–∏ `make run` | **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤** | –ó–∞–ø—É—Å–∫–∞–µ—Ç `go run ./cmd/app` –Ω–∞ –ø–æ—Ä—Ç—É `:8080`             |
| `.\make.bat build`                  | **–°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞**                | –°–æ–∑–¥–∞—ë—Ç `bin\app.exe`                                     |
| `.\make.bat start`                  | **–ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞**     | –ó–∞–ø—É—Å–∫–∞–µ—Ç `bin\app.exe`, –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç               |
| `.\make.bat clean`                  | **–û—á–∏—Å—Ç–∫–∞ —Å–±–æ—Ä–∫–∏**                  | –£–¥–∞–ª—è–µ—Ç –ø–∞–ø–∫—É `bin`                                       |
| `.\make.bat test`                   | **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ Go**                | –í—ã–ø–æ–ª–Ω—è–µ—Ç `go test ./... -v`                              |
| `.\make.bat lint`                   | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º**          | –ó–∞–ø—É—Å–∫–∞–µ—Ç `golangci-lint`; –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –µ–≥–æ |
| `.\make.bat tidy`                   | **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**         | –í—ã–ø–æ–ª–Ω—è–µ—Ç `go mod tidy`                                   |

---

TEST command: golangci-lint run

| –ö–æ–º–∞–Ω–¥–∞                                         | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                   |
| ----------------------------------------------- | -------------------------------------------- |
| `golangci-lint run`                             | –ó–∞–ø—É—Å–∫–∞–µ—Ç **–≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ª–∏–Ω—Ç–µ—Ä—ã**           |
| `golangci-lint run --fast`                      | –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ –∏ –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏            |
| `golangci-lint run ./internal/core`             | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–∞–ø–∫—É                   |
| `golangci-lint run --out-format=github-actions` | –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥ –¥–ª—è CI/CD                  |
| `golangci-lint help linters`                    | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–∏–Ω—Ç–µ—Ä—ã (100+ —à—Ç—É–∫) |


## üõ†Ô∏è –†–∞–±–æ—Ç–∞ —Å NGINX
- **NGINX –∫–∞–∫ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏**:
  - TLS (Let‚Äôs Encrypt), rate limiting (100 req/s, burst=200), gzip, –∫—ç—à —Å—Ç–∞—Ç–∏–∫–∏ (1 –≥–æ–¥).
  - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: `X-Forwarded-For`, `X-Real-IP`, `X-Forwarded-Proto` –∫ Go (middleware/proxy.go).
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `/healthz` –ø–æ IP (OWASP A04).
- **–ü–æ—á–µ–º—É**: NGINX —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Go (TLS, –∫—ç—à, DoS), —É—Å–∏–ª–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (HSTS, CORS).

---
```